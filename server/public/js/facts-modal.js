//Shows interesting facts about love and relationships while the user waits for GPT-4 to take its sweet time
//This code was written by ChatGPT and appears surprisingly decent...
class FactsModal extends HTMLElement {
    constructor() {
      super();

      // Create shadow root
      const shadow = this.attachShadow({ mode: 'open' });

      // Create modal elements
      const modal = document.createElement('div');
      modal.setAttribute('id', 'factsModal');
      modal.setAttribute('class', 'modal');
      const modalContent = document.createElement('div');
      modalContent.setAttribute('class', 'modal-content');
      const p1 = document.createElement('p');
      p1.textContent = "Please Wait...";
      p1.setAttribute("class", "header")
      const p2 = document.createElement('p');
      p2.setAttribute('id', 'factText');
      p2.setAttribute('class', 'content')
      
      // Append elements to shadow DOM
      modalContent.appendChild(p1);
      modalContent.appendChild(p2);
      modal.appendChild(modalContent);
      shadow.appendChild(modal);

      // Add styles
      const style = document.createElement('style');
      style.textContent = `
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.6);
        z-index: 50000
      }
      .modal-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        padding: 20px;
        border-radius: 5px;
        text-align: center;
        width: 80%;
        height: 320px;
        max-width: 540px;
        background-color:#333;
        color: #CC5500;
      }
      .modal-content .header {
        font-size:16px; 
        font-weight:bold:
        color: white
      }
      .modal-content .content {
        font-size: 14px;
        font-weight: bold;
        color: white;
      }
    `;
      shadow.appendChild(style);

      // Facts generated by ChatGPT, factuality is not guaranteed!
      this.loveAndRelationshipFacts = [
        "Oxytocin, often dubbed the 'love hormone,' plays a crucial role in forming social bonds and romantic relationships.",
        "Long-term couples often synchronize their heart rates and brainwave patterns.",
        "According to some studies, it takes about 0.2 seconds to fall in love.",
        "Couples who are too similar to each other are not likely to last.",
        "Love can act as a natural painkiller, as it activates the same areas of the brain as drugs like cocaine.",
        "Being in love is neurologically similar to having an obsessive-compulsive disorder.",
        "Studies suggest that men are more likely to say 'I love you' first in a relationship.",
        "The 'honeymoon phase' in a relationship typically lasts for about a year.",
        "The concept of 'love at first sight' may actually be a strong initial attraction that can lead to a deeper connection.",
        "Long-distance relationships are more likely to succeed with the advent of communication technology.",
        "Cuddling releases natural antidepressants and can improve your mental well-being.",
        "Lack of affection in childhood can lead to 'love starvation,' affecting the ability to form relationships later in life.",
        "Couples who laugh together are more likely to have a stronger relationship.",
        "The term 'love' is from the Sanskrit lubhyati, which means 'desire.'",
        "Research indicates that a man’s attractiveness can be significantly enhanced when he is desired by other women.",
        "The fear of falling in love or emotional attachment is known as Philophobia.",
        "Online dating is now the most common way for couples in the U.S. to meet.",
        "A study found that people in a relationship are more likely to forgive their partners if they imagine the act of forgiving.",
        "Arguments that focus on the relationship rather than the individual are healthier and more productive.",
        "The act of gazing into your partner’s eyes can often trigger feelings of love and affection.",
        "People are more likely to tilt their heads to the right when kissing, according to various studies.",
        "A person is more likely to be attracted to someone who looks similar to them.",
        "A strong sense of humor is generally associated with intelligence and honesty.",
        "Jealousy is the leading cause of spousal homicide worldwide.",
        "Romantic love, as a passionate emotional state, typically lasts only about 18 months.",
        "In arranged marriages, love tends to grow over time; in love marriages, it decreases over time.",
        "Gratitude towards your partner can be a key element in relationship satisfaction.",
        "Couples who share the household chores are more likely to have a satisfying sexual relationship.",
        "The longer you're in a relationship, the more likely you are to be able to accurately gauge your partner's emotions.",
        "Watching romantic comedies can negatively affect your perception of relationships.",
        "The number one deal-breaker in a relationship is a lack of trust.",
        "Having a dog can make you more attractive in online dating profiles.",
        "People who are in love have chemical similarities with people with OCD.",
        "In some cultures, love is considered a mental illness.",
        "The apple is a symbol of love in multiple cultures.",
        "A 'work spouse' refers to a special relationship between two platonic colleagues.",
        "Studies show that keeping a gratitude journal can improve your relationship.",
        "Being in a romantic relationship can affect your taste in food.",
        "The concept of soulmates originated with Plato's writings.",
        "Opposites don't usually attract in long-term relationships.",
        "A study found that thinking about love can boost creativity.",
        "Women are more attracted to men who pay attention and remember details about them.",
        "The mere presence of a smartphone can reduce the quality of in-person conversations.",
        "Playing hard to get is a strategy that can backfire in many situations.",
        "Studies suggest that falling in love can help heal a broken heart.",
        "People in long-term relationships start to look like each other over time.",
        "A relationship 'micro-moment' is a small, fleeting instant of connection between two people.",
        "Studies suggest that people are more likely to fall in love during the winter months.",
        "The average person will fall in love seven times before getting married.",
        "Couples who spend money on shared experiences, rather than material things, are happier.",
        "Studies suggest that women are more sensitive to relationship issues than men.",
        "The longer and more deliberate a courtship, the better the prospects for a long marriage.",
        "People with symmetrical faces are considered more attractive for long-term relationships.",
        "People who smile in old photographs are less likely to get divorced, according to one study.",
        "Your heartbeat synchronizes with your partner when you sit close to them.",
        "The most common time for breakups is around three to five months.",
        "The fear of being single is called 'Anuptaphobia'.",
        "Married men live longer than single men, but married women do not live longer than single women.",
        "Social media stalking is a leading cause of jealousy in relationships today.",
        "A quarter of people in their 20s still live with their parents, affecting their dating lives.",
        "Married couples are more likely to gain weight than single people.",
        "People who have been dumped by their partner are more likely to have insomnia.",
        "People are more likely to cheat at the 'danger age' of 39, and in the last year of any decade.",
        "Psychologists suggest that most people will fall in love approximately seven times before marriage.",
        "Married people are less likely to suffer from dementia.",
        "The act of apologizing in a relationship often holds more weight than the actual resolution of the issue.",
        "Studies show that men are more emotionally affected by breakups than women.",
        "The average person spends about 336 hours, or two full weeks, kissing in their lifetime.",
        "Scent plays a significant role in attraction between men and women."
      
      ];
    }

    // Show modal
    showModal() {
      const modal = this.shadowRoot.getElementById('factsModal');
      const factText = this.shadowRoot.getElementById('factText');
      modal.style.display = 'block';

      // Initial display
      this.updateFact(factText);

      // Update the fact every 10 seconds
      const interval = setInterval(() => {
        this.updateFact(factText);
      }, 10000);

      // Save interval ID for later clearance
      modal.setAttribute('data-interval-id', interval);
    }

    // Hide modal
    hideModal() {
      const modal = this.shadowRoot.getElementById('factsModal');
      modal.style.display = 'none';
      
      // Clear the interval
      const interval = modal.getAttribute('data-interval-id');
      clearInterval(interval);
    }

    //Get state
    isOpen() {
        const modal = this.shadowRoot.getElementById('factsModal');
        return modal.style.display === 'block';
    }

    // Update fact
    updateFact(element) {
      const randomIndex = Math.floor(Math.random() * this.loveAndRelationshipFacts.length);
      element.innerHTML = `<br /><br /> <b>DID YOU KNOW</b><br /><br />
                             "${this.loveAndRelationshipFacts[randomIndex]}"<br />
                             <small>Love Fact #${randomIndex}</small>`;
    }
  }

  // Define the web component
  customElements.define('facts-modal', FactsModal);
